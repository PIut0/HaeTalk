<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>해잡남</title>
        <link rel="stylesheet" href="./css/shipable.css">
    </head>
    <script>
        function toMain(){
            location.href = "../index.html";
        }
    </script>
    <body>
        <nav class="nav_bar">
            <img src="./img/nav_text.png" alt="" onclick="toMain()">
        </nav>

        <div class="section1">
            <h2 class="text">주문 가능 지역인지 꼭 확인하세요!</h2>
            <h2 class="text">하루 두 번! 고객님이 원하는 시간에 찾아가는</h2>
            <h1>'해톡배송'</h1>
        </div>

        <div class="section2">
            <img src="./img/section1.png" alt="">
            <h2>오늘 주문하면 오늘 저녁에는</h2>
            <h2>꼭 도착하는 <span>해톡배송!</span></h2>
            <div class="area_search">
                <div class="search">배송 가능 지역 확인하기</div><img src="./img/search.png" alt="">
            </div>
            <h3 class="shipable">해톡 배송가능 지역 안내</h3>
            <h4>서울 전지역, 경기도 안양,고양,과천 전지역</h4>
            <h4>이외지역 배송 불가</h4>
            <div class="cover"></div>
            <!-- iOS에서는 position:fixed 버그가 있음, 적용하는 사이트에 맞게 position:absolute 등을 이용하여 top,left값 조정 필요 -->
            <div id="layer" style="display:none;position:fixed;overflow:hidden;-webkit-overflow-scrolling:touch;"></div>           
        </div>

        <div class="section3">
            <div class="contents">
                <img src="./img/sec3_1.png" alt="">
                <img src="./img/sec3_2.png" alt="">
            </div>
        </div>
    </body>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        let area_list = [
            "서울",
            "안양시",
            "고양시",
            "과천시"
        ]
        // 우편번호 찾기 화면을 넣을 element
        var element_layer = document.getElementById('layer');
        let search = document.querySelector(".area_search");
        let cover = document.querySelector(".cover");
        let shipable = document.querySelector(".shipable");

        function showArea(data){
            if(data){
                shipable.innerHTML = `<span class="possible">배송 가능 지역입니다</span>`;
            }else{
                shipable.innerHTML = `<span class="impossible">배송 불가 지역입니다</span>`;
            }
        }
        cover.addEventListener("click",closeDaumPostcode)

        function closeDaumPostcode() {
            // iframe을 넣은 element를 안보이게 한다.
            element_layer.style.display = 'none';
            cover.style.display='none';
        }

        function sample2_execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    element_layer.style.display = 'none';

                    let result = false;
                    let place = `${data.sido} ${data.sigungu}`
                    // console.log(place)
                    area_list.forEach((Element)=>{
                        if(place.includes(Element)){
                            // console.log(Element)
                            result=true;
                            // break;
                        }
                    })
                    showArea(result);
                },
                onclose: closeDaumPostcode,
                width : '100%',
                height : '100%',
                maxSuggestItems : 5,
            }).embed(element_layer);

            element_layer.style.display = 'block';
            cover.style.display='block';

            // initLayerPosition();
        }

        search.addEventListener("click",sample2_execDaumPostcode);

    </script>
</html>